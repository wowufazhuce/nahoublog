---
import { ThemeSwitch } from './ThemeSwitch'
import { author, footer } from '@/config.json'
import { getAllPostsWordCount } from '@/utils/content'
import { RunningDays } from './RunningDays'
import Link from './Link.astro'

const sinceYear = new Date(footer.startTime).getFullYear()
const thisYear = new Date().getFullYear()
const copyDate = sinceYear === thisYear ? thisYear : `${sinceYear} - ${thisYear}`

const wordCount = await getAllPostsWordCount()

const wordCountStr = (wordCount / 1000).toFixed(1) + 'k'
---

<footer class="relative z-1 py-8 px-4 md:px-8 border-t border-primary text-secondary text-sm">
  <div class="text-center space-y-2">
    <div>
      <RunningDays client:only="react" />
      <span class="select-none opacity-50">丨</span>
      <span>共瞎逼逼了 {wordCountStr} 字</span>
    </div>
    <div class="space-x-1">
      <span>© 2025 <Link href="/">老儒杂谈</Link> 版权所有</span>
      <Link href="/rss.xml" data-no-swup>
        <i class="iconfont icon-rss"></i>
        <span>RSS</span>
      </Link>
      <Link href="/privacy" data-no-swup>
        <span>隐私协议</span>
      </Link>
      <Link href="/cookies" data-no-swup>
        <span>Cookies</span>
      </Link>
    </div>
    <div class="text-sm">
      <Link href="https://beian.miit.gov.cn/">蜀ICP备2025147436号-3</Link>
        <span class="select-none opacity-50">丨</span>
      <Link href="https://beian.mps.gov.cn/#/query/webSearch?code=51068202000278">
        <img src="/i/ga.png" alt="公安备案图标" class="inline-block h-4 w-auto mr-1 align-text-bottom">
        川公网安备51068202000278号
      </Link>     
    </div>
  </div>
  <div class="mt-4 flex justify-center">
    <ThemeSwitch client:only="react" />
  </div>
</footer>
